<script type="text/javascript">
    RED.nodes.registerType('knxUltimateWatchDog', {
        category: 'KNX',
        color: '#C7E9C0',
        defaults: {
            server: { type: "knxUltimate-config", required: true },
            topic: { value: "12/0/0" },
            maxRetry: {value:6}, // After this number is reached, throw a connection error
            retryInterval: {value:10},
            name: { value: "" },
            autoStart: {value: true},
            checkLevel:{value:"Ethernet"}
        },
        inputs: 1,
        outputs: 1,
        outputLabels: ["Output"],
        icon: "node-watchdog-icon.svg",
        label: function () {
            return ((this.name || "KNX Watchdog") + " " + this.topic);
        },
        paletteLabel : "KNX WatchDog",
        oneditprepare: function () {
            $("#advancedOptionsAccordion").accordion({
                header:"h3",
                heightStyle: "content", 
                collapsible: true,
                active: false
            });
            
        },
        oneditsave: function(){
            
        }
        
    })
    
</script>

<script type="text/x-red" data-template-name="knxUltimateWatchDog">
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-tag"></i> Gateway </label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-checkLevel"><i class="fa fa-search"></i> Check level (please see the wiki)</label>
        <select id="node-input-checkLevel">
            <option value="Ethernet">Only Ethernet (default), using a fake Group Address to monitor. Works only with KNX/IP Routers</option>
            <option value="Eth+KNX">Ethernet + KNX Twisted Pair, using a real KNX device</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Group Address to monitor</label>
        <input type="text" id="node-input-topic" placeholder="Example: 12/0/0 Please use a non existent device.">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name </label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-input-autoStart" style="display:inline-block; width:auto; vertical-align:top;">
        <label style="width:auto" for="node-input-autoStart">&nbsp;&nbsp;<i class="fa fa-play-circle"></i>  Auto start the watchdog timer</label>
    </div>    
    
    <div id="advancedOptionsAccordion">
        <h3>Advanced options</h3>
        <div>
            <p>
                <div class="form-row">
                    <label for="node-input-retryInterval"><i class="fa fa-clock-o"></i> Retry interval (in seconds) </label>
                    <input type="text" id="node-input-retryInterval" placeholder="">
                </div>
                <div class="form-row">
                    <label for="node-input-maxRetry"><i class="fa fa-undo"></i> Number of retry before giving an error </label>
                    <input type="text" id="node-input-maxRetry" placeholder="">
                </div>
            </p>
        </div>
    </div>        
</script>
